---
title: "PSTAT126 Project"
author: "Liuqian Bao"
date: "2023-10-10"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library("skimr")
library("dplyr")
options(max.print=1000000)
library(readxl)
train <- read_excel("C:/Users/baoli/Desktop/PSTAT126/house-prices-advanced-regression-techniques/train.xlsx") 
```


```{r include=FALSE}
# Variable Selection
train1 <- subset(train, select = -c(MSSubClass, OverallCond, BsmtFinSF2, LowQualFinSF, BsmtHalfBath, YrSold, MoSold, MiscVal, PoolArea, ScreenPorch, EnclosedPorch, KitchenAbvGr, BedroomAbvGr, Street, Alley, Utilities, LandSlope, RoofMatl, BsmtExposure, Heating, CentralAir, MiscFeature, Fence, PoolQC, LandContour,BldgType, Exterior2nd, GarageQual, GarageCond, PavedDrive, SaleType, SaleCondition, GrLivArea, OverallQual, TotalBsmtSF, WoodDeckSF, GarageArea, Fireplaces, TotRmsAbvGrd, MSZoning, Functional, MasVnrArea, GarageYrBlt, YearBuilt, YearRemodAdd))

drop <- c("Condition1","Condition2", "3SsnPorch", "LotFrontage", "1stFlrSF", "2ndFlrSF")
train2 <- train1[,!(names(train1) %in% drop)]
train2
```

### Data Descrption 

#### Source

  Anna Montoya, DataCanary. (2016). House Prices - Advanced Regression Techniques. Kaggle.Obtained from https://kaggle.com/competitions/house-prices-advanced-regression-techniques

#### Observational unit:

Each property sampled in the data set.

#### Variable descriptions: 
  
  Id: The id of the observation, numbered from 1 to 1460.
  
  Response variable: 
  
  SalePrice:  The property's sale price in dollars. The dependent variable.
  
  Predictors:
  
  1. LotArea: Lot size in square feet

  2. LotShape: General shape of property
  
    Reg	Regular	
    IR1	Slightly irregular
    IR2	Moderately Irregular
    IR3	Irregular
  
  3. LotConfig: Lot configuration
  
    Inside	Inside lot
    Corner	Corner lot
    CulDSac	Cul-de-sac
    FR2	Frontage on 2 sides of property
    FR3	Frontage on 3 sides of property
  
  4. Neighborhood: Physical locations within Ames city limits
  
    Blmngtn	Bloomington Heights
    Blueste	Bluestem
    BrDale	Briardale
    BrkSide	Brookside
    ClearCr	Clear Creek
    CollgCr	College Creek
    Crawfor	Crawford
    Edwards	Edwards
    Gilbert	Gilbert
    IDOTRR	Iowa DOT and Rail Road
    MeadowV	Meadow Village
    Mitchel	Mitchell
    Names	North Ames
    NoRidge	Northridge
    NPkVill	Northpark Villa
    NridgHt	Northridge Heights
    NWAmes	Northwest Ames
    OldTown	Old Town
    SWISU	South & West of Iowa State University
    Sawyer	Sawyer
    SawyerW	Sawyer West
    Somerst	Somerset
    StoneBr	Stone Brook
    Timber	Timberland
    Veenker	Veenker
  
  5. HouseStyle: Style of dwelling
  
    1Story	One story
    1.5Fin	One and one-half story: 2nd level finished
    1.5Unf	One and one-half story: 2nd level unfinished
    2Story	Two story
    2.5Fin	Two and one-half story: 2nd level finished
    2.5Unf	Two and one-half story: 2nd level unfinished
    SFoyer	Split Foyer
    SLvl	Split Level
  
  8. RoofStyle: Type of roof
  
    Flat	Flat
    Gable	Gable
    Gambrel	Gabrel (Barn)
    Hip	Hip
    Mansard	Mansard
    Shed	Shed
  
  9. Exterior1st: Exterior covering on house
  
    AsbShng	Asbestos Shingles
    AsphShn	Asphalt Shingles
    BrkComm	Brick Common
    BrkFace	Brick Face
    CBlock	Cinder Block
    CemntBd	Cement Board
    HdBoard	Hard Board
    ImStucc	Imitation Stucco
    MetalSd	Metal Siding
    Other	Other
    Plywood	Plywood
    PreCast	PreCast	
    Stone	Stone
    Stucco	Stucco
    VinylSd	Vinyl Siding
    Wd Sdng	Wood Siding
    WdShing	Wood Shingles
  
  10. MasVnrType: Masonry veneer type
  
    BrkCmn	Brick Common
    BrkFace	Brick Face
    CBlock	Cinder Block
    None	None
    Stone	Stone

  11. ExterQual:Evaluates the quality of the material on the exterior 
  
    Ex	Excellent
    Gd	Good
    TA	Average/Typical
    Fa	Fair
    Po	Poor

  12. ExterCond: Evaluates the present condition of the material on the exterior
  
    Ex	Excellent
    Gd	Good
    TA	Average/Typical
    Fa	Fair
    Po	Poor

  13. Foundation: Type of foundation
  
    BrkTil	Brick & Tile
    CBlock	Cinder Block
    PConc	Poured Contrete	
    Slab	Slab
    Stone	Stone
    Wood	Wood

  14. BsmtQual: Evaluates the height of the basement
  
    Ex	Excellent (100+ inches)	
    Gd	Good (90-99 inches)
    TA	Typical (80-89 inches)
    Fa	Fair (70-79 inches)
    Po	Poor (<70 inches
    NA	No Basement

  15. BsmtCond: Evaluates the general condition of the basement
  
    Ex	Excellent
    Gd	Good
    TA	Typical - slight dampness allowed
    Fa	Fair - dampness or some cracking or settling
    Po	Poor - Severe cracking, settling, or wetness
    NA	No Basement

  16. BsmtFinType1: Rating of basement finished area
  
    GLQ	Good Living Quarters
    ALQ	Average Living Quarters
    BLQ	Below Average Living Quarters	
    Rec	Average Rec Room
    LwQ	Low Quality
    Unf	Unfinshed
    NA	No Basement

  17. BsmtFinSF1: basement finished area square feet
  
  18. BsmtFinType2: Rating of basement finished area (if multiple types)
  
    GLQ	Good Living Quarters
    ALQ	Average Living Quarters
    BLQ	Below Average Living Quarters	
    Rec	Average Rec Room
    LwQ	Low Quality
    Unf	Unfinshed
    NA	No Basement

  19. BsmtUnfSF: Unfinished square feet of basement area
  
  20. HeatingQC: Heating quality and condition
  
    Ex	Excellent
    Gd	Good
    TA	Average/Typical
    Fa	Fair
    Po	Poor

  21. Electrical system
  
    SBrkr	Standard Circuit Breakers & Romex
    FuseA	Fuse Box over 60 AMP and all Romex wiring (Average)	
    FuseF	60 AMP Fuse Box and mostly Romex wiring (Fair)
    FuseP	60 AMP Fuse Box and mostly knob & tube wiring (poor)
    Mix	Mixed

  22. BsmtFullBath: Basement full bathrooms
  
  23. FullBath: Full bathrooms above grade
  
  24. HalfBath: Half baths above grade
  
  25. KitchenQualKitchenQual: Kitchen quality
  
    Ex	Excellent
    Gd	Good
    TA	Typical/Average
    Fa	Fair
    Po	Poor

  26. FireplaceQu: Fireplace quality
  
    Ex	Excellent - Exceptional Masonry Fireplace
    Gd	Good - Masonry Fireplace in main level
    TA	Average - Prefabricated Fireplace in main living area or Masonry Fireplace in basement
    Fa	Fair - Prefabricated Fireplace in basement
    Po	Poor - Ben Franklin Stove
    NA	No Fireplace

  27. GarageType: Garage location
  
    2Types	More than one type of garage
    Attchd	Attached to home
    Basment	Basement Garage
    BuiltIn	Built-In (Garage part of house - typically has room above garage)
    CarPort	Car Port
    Detchd	Detached from home
    NA	No Garage

  28. GarageFinish: Interior finish of the garage
  
    Fin	Finished
    RFn	Rough Finished	
    Unf	Unfinished
    NA	No Garage

  29. GarageCars: Size of garage in car capacity
  
  30. OpenPorchSF: Open porch area in square feet

### Data Summary 

#### Summary Statistics 

```{r}
skim(train2)
```

### Distribution of individual variables 

```{r}
train2_numerical <- select_if(train2, is.numeric)
for (i in colnames(train2_numerical)){
   hist(train2_numerical[[i]], 
        breaks = 80, 
        col='steelblue',
        xlab = toString(i))
}
```


### Correlation of Numerical variables

#### correlation matrix 

The correlation matrix of all numerical variables:
```{r}
cor(select_if(train2, is.numeric))
```

#### Scatter plots of numercal variables against the SalePrice

```{r}

```


### Correlation of catagorical variables

Side by side boxplot for SalePrice against the categorical varables:
```{r include=FALSE}
train_2_categorical <- select_if(train2, is.character)

for (i in colnames(train_2_categorical)){
   boxplot(train2$SalePrice ~ train2[[i]], 
           col='steelblue',
           xlab = toString(i), 
           ylab='SalePrice')
}
```
```{r}

```

1. The Neighborhood variable has a strong correlation with the SalePrice, because we can see from the side-by-side box plot that the mean of the distribution of SalePrice for different neighborhoods are very different. Also, different neighborhoods have very different variance in SalPrice.

```{r}

```

2. The HouseStyle variable also has a strong correlation with the SalePrice, and different house styles also show great differences in variance of the SalePrice distribution, the 1 story and 2 story styles, in particular, have much greater variance than other styles. 

```{r}

```

3. The ExterQual, BsmtQual, BsmtCond, KitchenQual, and FireplaceQu, which are the condition and qualities of the exterior, basement, kitchen and fireplace of the properties, all have similar relationships with the SalePrice. In general, the better the condition/quiality 


### Interesting features 

1. The ExterCond variable, which is the the present condition of the material on the exterior, surprisingly, has very little correlation with the SalePrice based on the side-by-side box plot. 